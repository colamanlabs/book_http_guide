# HTTP 완벽 가이드
```
알라딘 ebook 구매
```

```
2024.05.01
20240501_0007.md
```

## 14장 보안 HTTP (page 355)

#### 14.1.1 HTTPS 
```
HTTPS 는 HTTP 를 안전하게 만드는 방식중에서 가장 인기있는 것이다.
넷스케이프 커뮤니케이션 주식회사 에서 개척하였으며,
모든 주류 브라우저와 서버에서 지원한다.
```

https://velog.velcdn.com/images/bahar-j/post/e6f482e0-6c0f-48f4-9e6c-70134b7e4cc6/image.png

### 14.2 디지털 암호학

```
암호

키

대칭키 암호체계

비대칭키 암호체계

공개키 암호법

디지털 서명
- 메시지가 위조 혹은 변조되지 않았음을 입증하는 체크섬

디지털 인증서 
- 신뢰할 만한 조직에 의해 서명되고 검증된 신원 확인 정보

```


### 14.5 디지털 서명

#### 14.5.1 서명은 암호 체크섬이다.
```

1) 노드 A 는 가변길이 메세지를 정제해서 고정된 길이의 요약(digest)으로 만든다.

2) 노드 A 는 그 요약에, 사용자의 개인키를 매개변수로 하는 '서명'함수를 적용한다.

3) 서명이 계산되면 노드 A 는 그것을 메시지의 끝에 덧붙이고, 메시지와 서명 둘 다를 노드 B 에게 전송한다.

4) 메시지를 받은 노드 B 는 서명을 검사한다. 노드 B 는 서명에 공개키를 이용해 적용한다. 
풀어낸 요약이 노드 B 갖고 있는 버전의 요약과 일치하지 않으면, 
메세지가 송신중에 위조되었거나,
아니면 발송자가 노드 A 의 개인키를 갖고 있지 않은 것이다.
(따라서 메세지를 쓴 것은 노드 A 가 아니다.)

```

### 14.6 디지털 인증서

#### 14.6.1 인증서의 내부
```
디지털 인증서에는 공식적으로 "인증기관"에 의해 디지털 서명된 정보의 집합이 담겨 있다.

- 대상의 이름(사람, 서버, 조직등)
- 유효기간
- 인증서 발급자(노가 이 인증서를 보증하는가)
- 인증서 발급자의 디지털 서명

추가적으로 디지털 인증서는 대상과 사용된 서명 알고리즘에 대한 서술적인 정보 뿐 아니라, 보통 대상의 공개키도 담고 있다.
```


https://velog.velcdn.com/images/bahar-j/post/f7e0694e-b4cb-4a41-9959-dad6ba7b8587/image.png


#### 14.6.2 X.509 v3 인증서
```
불행히도, 디지털 인증서에 대한 전 세계적인 단일 표준은 없다.
좋은 소식은 오늘날 사용되는 대부분의 인증서가 그들의 정보를 
X.509 라 불리는 표준화된 서식에 저장하고 있다는 것이다.

X.509 기반 인증서에는 (가장 중요한) 웹 서버 인증서, 클라이언트 이메일 인증서,
소프트웨어 코드사인(code-signing) 인증서, 인증기관 인증서를 비롯한 몇가지 변종이 있다.
```


### 14.7 HTTPS 의 세부사항

#### 14.7.1 HTTPS 개요
```
HTTPS 는 HTTP 메세지를 TCP 로 보내기 전에 먼저 그것들을 암호화 하는 보안계층으로 보낸다.
오늘날 HTTPS 의 보안계층은 SSL 과 그것의 현대적 대체품인 TLS 로 구현되었다.
우리는 SSL 과 TLS 모두를 의미하는 단어로 "SSL" 을 사용하는 관행을 따를 것이다.
```


#### 14.7.2 HTTPS 스킴(page 373)

#### 14.7.3 보안 전송 셋업

https://velog.velcdn.com/images/bahar-j/post/8dc17664-04ab-4ace-8b38-67759ac07dd0/image.png

```
1) 서버의 443 포트로 TCP 커넥션 수립

2) SSL 보안 매개변수 핸드셰이크

3) [클라이언트 -> 서버] SSL 통해 보내진 HTTP 요청/TCP를 통해 보내진 암호화된 요청

4) [클라이언트 <- 서버>] SSL 통해 보내진 HTTP 요청/TCP를 통해 보내진 암호화된 응답
```

#### 14.7.4 SSL 핸드셰이크

```
핸드셰이크에서는 다음과 같은 일이 일어난다.

- 프로토콜 버전 번호 교환
- 양쪽이 알고 있는 암호 선택
- 양쪽의 신원을 인증
- 채널을 암호화 하기 위한 임시 세션 키 생성
```

https://velog.velcdn.com/images/bahar-j/post/4f64cda7-0e6e-469c-a999-8b192d9d574f/image.png

```
1) [클라이언트 -> 서버] 클라이언트가 암호 후보들을 보내고, 인증서를 요구한다.

2) [클라이언트 <- 서버] 서버는 선택된 암호화 인증서를 보낸다.

3) [클라이언트 -> 서버] 클라이언트가 비밀정보를 보낸다. 클라이언트와 서버는 키를 만든다.

4) [클라이언트 <-> 서버] 클라이언트와 서버는 서로에게 암호화를 시작한다고 말해준다.
```

#### 14.7.5 서버 인증서
```
사용자와 사용자의 클라이언트 소프트웨어는 모든 것이 믿을 만한 것인지 확인하기 위해 인증서를 검증할 수 있다.
```

#### 14.7.6 사이트 인증서 검사
```
1) 날짜검사
인증서의 시작 및 종료일을 검사한다.

2) 서명자 신뢰도 검사
모든 인증서는 서버를 보증하는 어떤 인증기관(CA) 에 의해 서명되어 있다.
누구나 인증서를 생성할 수 있지만, 
몇몇 CA 는 인증서 지원자의 신원및 사업의 선량함을 입증하는 절차를 갖춘 잘 알려진 기관이다.
이러한 이유로 브라우져넌 신뢰할 만한 서명 기관의 목록을 포함한 채로 배포한다.
만약, 브라우져가 알려지지 않은(악의적일 가능성이 있는) 인증기관으로부터 서명된 인증서를 받았다면, 
브라우져는 보통 경고를 보여준다.

3) 서명검사
서명기관이 믿을 만 하다고 판단하면,
브라우져는 서명기관의 공개키를 서명에 적용하여, 체크섬과 비교함으로서 인증서 무결성을 검사한다.

4) 사이트 신원검사
서버가 누군가의 인증서를 복사하거나, 트래픽을 가로채는 것을 방지하기 위해
대부분의 브라우져는 인증서의 도메인 이름이, 대화중인 서버의 도메인이름과 비교하여 맞는지 검사한다.
서버 인증서에는 보통 단일 도메인 이름이 들어있지만, 
몇몇 CA 는 서버 클러스터나, 서버팜을 위해 
서버 이름의 목록이나, 서버 이름들에 대한 와일드카드 표현이 있는 인증서를 만든다.
```

### 14.8 진짜 HTTPS 클라이언트

#### 14.8.1 OpenSSL
```
OpenSSL 은 SSL 과 TLS 의 가장 인기 있는 오픈소스 구현이다.
```


#  끝 ( page 390 )

